# 트랜잭션 관리

## 트랜잭션

- 데이터베이스에서 데이터 처리의 한 단위를 트랜젝션이라고 부른다.
- 대부분의 데이터베이스는 데이터를 저장하고 수정하고 삭제하는 작업을 바로 물리적인 하드디스크에 반영하지 않는다.
- 개발자의 실수로 잘못된 명령문을 입력하였을 경우 다시 원래 상태로 되돌리기 위한 안전 장치이다.
- 따라서 개발자가 ‘커밋’ 이라는 작업을 하기 전까지 입력한 명령문은 메모리에서만 동작하고, 실질적으로 반영하지 않으며, 커밋 작업이 발생하면 그 때 반영된다.
- 개발자가 데이터에 대한 작업을 하기 위해 입력하는 명령문들의 시작부터 커밋까지를 하나의 트랜잭션이라고 부른다.

## ROLLBACK

- 데이터의 저장, 삭제, 수정 등의 작업을 하고 난 후 **원래의 형태로 되돌리는 작업**을 의미
- 커밋이라는 작업을 하고 난 이후에는 ROLLBACK 작업을해도 원래의 형태로 되돌릴 수 없다.
- WORKBENCH의 경우 오토커밋이므로 ROLLBACK을 할 수가 없다.
    - 오토 커밋을 해제하면 가능하다.

## COMMIT

- 하나의 트랜잭션을 물리적인 **데이터베이스에 적용**하는 작업
- 이 작업을 하게 되면 ROLLBACK을 해도 되돌릴 수 없다.
- 일반적으로 개발자가 만드는 프로그램들은 자동으로 커밋이 발생한다.

## SAVE POINT

- SAVE POINT를 지정하면 ROLLBACK시 **지정된 위치로 복원**할 수 있다.
- SAVEPOINT 명령어로 지점을 지정하고 ROLLBACK 명령어로 복원할 수 있다.

## TRUNCATE

- TRUCATE를 사용하면 지정된 테이블의 **모든 로우를 삭제**한다.
- DELETE문과 다른 점은 DELETE문은 데이터베이스에 바로 반영하지 않아 ROLLBACK이 가능하지만, TRUNCATE는 바로 데이터베이스에 반영하므로 **ROLLBACK이 불가능하다.**